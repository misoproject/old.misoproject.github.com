<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
  <!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
  <!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src='http://use.typekit.com/aow5drr.js' type='text/javascript'></script>
    <script type='text/javascript'>
      try{ Typekit.load(); } catch(e) {}
    </script>
    <meta charset='utf-8' />
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible' />
    <meta content='The Miso Project' name='description' />
    <meta content='The Miso Project' name='name' />
    <meta content='width=device-width' name='viewport' />
    <title>The Miso Project :: d3.chart :: API Reference</title>
    <link href='/stylesheets/screen.css' rel='stylesheet' />
    <link href='/stylesheets/codemirror.css' rel='stylesheet' />
    
  </head>
  <body>
    <nav>
      <span class='miso'>
        <a href='/'>
          &larr; Miso Home
        </a>
      </span>
      <span>
        <a href='/d3-chart'>
          Home
        </a>
      </span>
      <span>
        <a href='/d3-chart/examples.html'>
          Examples
        </a>
      </span>
      <span>
        <a href='/d3-chart/tutorials.html'>
          Tutorials
        </a>
      </span>
      <span>
        <a href='/d3-chart/api.html'>
          API Doc
        </a>
      </span>
      <span>
        <a href='/d3-chart/charts.html'>
          Charts
        </a>
      </span>
      <span>
        <a href='http://www.github.com/misoproject/d3.chart'>
          Code (Github)
        </a>
      </span>
    </nav>
    <article class='api d3-chart'>
  <div class='api_wrapper'>
    <h4>See up to date API on our <a href="https://github.com/misoproject/d3.chart/wiki/api">
    github wiki API page</a>.</h4>
    <br />
    <section class='api' id='d3chart'>
  <h2>
    d3.chart
  </h2>
  <p>
    Used to define new chart types.
  </p>
  <div class='entry' id='d3chart_constructor'>
  <div class='bar'>
    <h3>
      d3.chart(name, options)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        A chart constructor.
      </span>
    </span>
  </div>
  <p>
    Create a new chart constructor or return a previously-created chart
constructor.
<div class="codeblock"><textarea name="codehelper"  class="code" mode="" globals="d3" runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    log("Hi! I'm a chart");
  }
});

var chart = d3.select(output)
  .chart("CircleChart");</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
  <div class='head'>
    <span class='name'>
      name
    </span>
    <span class='type'>
      String
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    If no other arguments are specified, return the previously-created chart with this name.
  </p>
</li>
    <li>
      <div class='head'>
        <span class='name'>
          protoProps
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        If specified, this value will be forwarded to `Chart.extend` and used when creating new chart instances.
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          staticProps
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        If specified, this value will be forwarded to `Chart.extend` and used to define properties on the chart constructor function.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_extend'>
  <div class='bar'>
    <h3>
      d3.chart(chartType).extend(name, protoProps, staticProps)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        A Chart constructor
      </span>
    </span>
  </div>
  <p>
    Create a new Chart constructor with the provided options acting as
"overrides" for the default chart instance methods. Allows for basic
inheritance so that new chart constructors may be defined in terms of
existing chart constructors. Based on the `extend` function defined by
Backbone.js
<div class="codeblock"><textarea name="codehelper"  class="code" mode="" globals="d3" runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    log("Hi! I'm a chart");
  }
});

d3.chart("CircleChart").extend("OtherCircleChart", {
  initialize: function() {
    log("I am a circle chart based on the one above!");
  }
})

var chart = d3.select(output)
  .chart("OtherCircleChart");</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Identifier for the new Chart constructor.
      </p>
    </li>
    <li>
  <div class='head'>
    <span class='name'>
      protoProps
    </span>
    <span class='type'>
      Object
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    Properties to set on the new chart's prototype.
d3.chart reserves the following properties:
* <code>demux</code> - <function> A method specifying how data should be modified for individually attached charts. Takes two arguments: <code>attachmentName</code> and the full data passed to <code>Chart#draw</code> (after it was transformed.)
  </p>
</li>
    <li>
      <div class='head'>
        <span class='name'>
          staticProps
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        Properties to be set on the chart constructor itself.
      </p>
    </li>
  </ul>
</div>
  <h3 class='instance'>
    Instance Properties
  </h3>
  <div class='entry' id='d3chart_i_base'>
  <div class='bar'>
    <h3>
      chart.base
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3 selection
      </span>
    </span>
  </div>
  <p>
    The d3.selection in which the Chart instance is contained.
<div class="codeblock"><textarea name="codehelper"  class="code" mode="" globals="d3" runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    log("The base name attribute is set to: " + this.base.attr("name"));
  }
});

var chart = d3.select(output)
  .append("p")
  .attr("name", "LeParagraph")
  .chart("CircleChart");</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
</div>
  <h3 class='instance'>
    Instance Methods
  </h3>
  <div class='entry' id='d3chart_i_draw'>
  <div class='bar'>
    <h3>
      chart.draw(data)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        chart instance
      </span>
    </span>
  </div>
  <p>
    Update the chart's representation in the DOM, drawing all of its layers and
any "attachment" charts (as attached via <code>Chart#attach</code>.
<div class="codeblock"><textarea name="codehelper"  class="code" mode="" globals="d3"  showConsole="false" buttons="none" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
// assume previously defined d3.chart called
// CircleChart

// create an instance of the chart on a d3 selection
var chart = d3.select(output)
  .append("svg")
  .attr("height", 30)
  .attr("width", 400)
  .chart("CircleChart");

// render it with some data
chart.draw([1,4,6,9,12,13,30]);</textarea></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
  <div class='head'>
    <span class='name'>
      data
    </span>
    <span class='type'>
      
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    Data to pass to the <code>Layer#draw</code> method of
this chart's layers (if any) and the draw method of this
chart's attachments (if any).
  </p>
</li>
  </ul>
</div>
<div class='entry' id='d3chart_i_transform'>
  <div class='bar'>
    <h3>
      chart.transform(data)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        transformed data
      </span>
    </span>
  </div>
  <p>
    Can be defined as a passthrough before the draw methods are called to transform
the data before it is drawn.
<br/><i>Note you will most likely never call this method directly, but rather define it during
chart definition. Nonetheless it is a method that is available on the instance.</i>
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    // assume we create layers and such here.
  },
  transform: function(data) {
    // assume we recieve an object that has 
    // the data array under a values property like so:
    // { values: [...] }
    return data.values;
  }
});

var chart = d3.select(output)
  .append("svg")
  .attr("height", 30)
  .attr("width", 400)
  .chart("CircleChart");

// render it with some data
log(chart.transform({ values: [1,4,6,9,12,13,30]}));
</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          data
        </span>
        <span class='type'>
          
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        the data to transform
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_trigger'>
  <div class='bar'>
    <h3>
      chart.trigger(name, ..*)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        a reference to the chart (chainable)
      </span>
    </span>
  </div>
  <p>
    Publish an event on this chart with the given <code>name</code>.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {

  },
  action: function() {
    this.trigger("acted", "action executed!");
  }
});

var chart = d3.select(output)
  .chart("CircleChart");

chart.on("acted", function(message){
  log(message);
});

chart.action();</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        The name of the event to publish
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          ..*
        </span>
        <span class='type'>
          Anything
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        Values with which to invoke the registered callbacks
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_on'>
  <div class='bar'>
    <h3>
      chart.on(name, callback, context)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        A reference to this chart instance (chainable.)
      </span>
    </span>
  </div>
  <p>
    Subscribe a handler to a "lifecycle event". These events (and only these
events) are triggered when <code>Layer#draw</code> is invoked &mdash; see
that method for more details on lifecycle events.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {

  },
  action: function() {
    this.trigger("acted", "action executed!");
  }
});

var chart = d3.select(output)
  .chart("CircleChart");

chart.on("acted", function(message){
  log(message);
});

chart.action();</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Name of event
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          callback
        </span>
        <span class='type'>
          Function
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Function to be invoked when the event occurs
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          context
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        Value to set as `this` when invoking the `callback`.
        Defaults to the chart instance.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_once'>
  <div class='bar'>
    <h3>
      chart.once(name, callback, context)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        A reference to this chart (chainable).
      </span>
    </span>
  </div>
  <p>
    Subscribe a callback function to an event triggered on the chart. This
function will be invoked at the next occurance of the event and immediately
unsubscribed. See <code>Chart.on</code> to subscribe a callback function
to an event indefinitely.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {

  },
  action: function() {
    this.trigger("acted", "action executed!");
  }
});

var chart = d3.select(output)
  .chart("CircleChart");

chart.once("acted", function(message){
  log(message);
});

// will only call the above callback once even
// though we will trigger twice
chart.action();
chart.action();</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Name of event
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          callback
        </span>
        <span class='type'>
          Function
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Function to be invoked when the event occurs
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          context
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        Value to set as `this` when invoking the `callback`.
        Defaults to the chart instance.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_off'>
  <div class='bar'>
    <h3>
      chart.off(name, callback, context)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        chart instance
      </span>
    </span>
  </div>
  <p>
    Unsubscribe one or more callback functions from an event triggered on the
chart. When no arguments are specified, *all* handlers will be unsubscribed.
When only a <code>name</code> is specified, all handlers subscribed to
that event will be unsubscribed. When a <code>name</code> and <code>
callback</code> are specified, only that function will be unsubscribed
from that event. When a <code>name</code> and <code>context</code> are
specified (but <code>callback</code> is omitted), all events bound to the
given event with the given context will be unsubscribed.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {

  },
  action: function() {
    this.trigger("acted", "action executed!");
  }
});

var chart = d3.select(output)
  .chart("CircleChart");

chart.on("acted", function(message){
  log(message);
});

// will trigger
chart.action();

chart.off();

// won't trigger
chart.action();
</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Name of event to be unsubscribed. optional
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          callback
        </span>
        <span class='type'>
          Function
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Function to be unsubscribed. optional
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          context
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        Contexts to be unsubscribed. optional
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_layer'>
  <div class='bar'>
    <h3>
      chart.layer(name, selection, options)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3.layer instance
      </span>
    </span>
  </div>
  <p>
    Interact with the chart's layers.
<br>
If only a `name` is provided, simply return the layer registered to that
name (if any).
<br>
If a `name` and `selection` are provided, treat the `selection` as a
previously-created layer and attach it to the chart with the specified
`name`.
<br>
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""   showConsole="false" buttons="none" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    // add a circles layer
    var circleLayer = this.unlayer("circles");

    // reattach layer
    this.layer("circles", circleLayer);
  }
});</textarea></div>
<br>
If all three arguments are specified, initialize a new layer using
the specified `selection` as a base passing along the specified `options`.
<br>
The layer.draw method of attached layers will be invoked
whenever this chart's `draw` is invoked and will receive the
data (optionally modified by the chart's transform method.
<br>
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""   showConsole="false" buttons="none" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    // add a circles layer
    this.layer(
      // layer name:
      "circles",

      // give it a container off of the base
      this.base.append("g"),

      // key layer methods: dataBind, insert and events
      {
        // define the data binding function
        dataBind: function(data) {
          return this.selectAll("circle")
            .data(data);
        },
        // define the element inserting 
        insert: function() {
          return this.append("circle");
        },
        // define the life cycle events
        events: {
          enter : function() {
            this.attr("cx", function(d) {
              return d;
            }).attr("cy", 10)
              .attr("r", 4);
          }
        }
      }
    );
  }
});</textarea></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        Name of the layer to attach or retrieve.
      </p>
    </li>
    <li>
  <div class='head'>
    <span class='name'>
      selection
    </span>
    <span class='type'>
      d3.selection|Layer
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The layer's base or a previously-created layer.
  </p>
</li>
    <li>
  <div class='head'>
    <span class='name'>
      options
    </span>
    <span class='type'>
      Object
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    Options to be forwarded to layer.
  </p>
  <ul>
    <li>
      <div class='head'>
        <span class='name'>
          events
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        An object specifying
        <a href="https://github.com/misoproject/d3.chart/wiki/lifecycle-events">lifecycle events</a>.
        Keys are the event names and the values are the callbacks.
      </p>
    </li>
    <li>
  <div class='head'>
    <span class='name'>
      dataBind
    </span>
    <span class='type'>
      Function
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The function that sets up the selection and binds the data using the d3 <code>.data()</code>
function. Must return that binding. Takes one argument which is the data that <code>draw</code>
was called with, transformed if the <code>transform</code> method was defined. The context of
the dataBind method is the selection of the layer.
  </p>
</li>
    <li>
  <div class='head'>
    <span class='name'>
      insert
    </span>
    <span class='type'>
      Function
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The function that gets called once the d3 <code>.enter()</code> method is executed. Note that happens
internally. The context of the insert function is the entered selection.
  </p>
</li>
  </ul>
</li>
  </ul>
</div>
<div class='entry' id='d3chart_i_unlayer'>
  <div class='bar'>
    <h3>
      chart.unlayer(name)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        The layer removed
      </span>
    </span>
  </div>
  <p>
    Remove a layer from the chart. Note that this does not hide the layer if
it has been rendered.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""   showConsole="false" buttons="none" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    // add a circles layer
    var circleLayer = this.unlayer("circles");

    // reattach layer
    this.layer("circles", circleLayer);
  }
});</textarea></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          name
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        The name of the layer to remove.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3chart_i_attach'>
  <div class='bar'>
    <h3>
      chart.attach(attachmentName, chart)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        Reference to this chart (chainable).
      </span>
    </span>
  </div>
  <p>
    Register or retrieve an "attachment" Chart. The "attachment" chart's `draw`
method will be invoked whenever the containing chart's `draw` method is
invoked.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""   showConsole="false" buttons="none" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("PieBars", {
  initialize: function() {
    var barchart = this.base.append("svg")
      .chart("BarChart");

    var piechart = this.base.append("svg")
      .chart("PieChart")
      .radius(10);

    this.attach("bars", barchart);
    this.attach("piechart", piechart);
  }
});</textarea></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
  <div class='head'>
    <span class='name'>
      attachmentName
    </span>
    <span class='type'>
      String
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    Name of the attachment. This does *not* correspond to a chart type but
rather is a unique identifier that the chart creator wishes to give to
their chart. Can then be used during <code>demux</code> to return
correct data for chart instance.
  </p>
</li>
    <li>
  <div class='head'>
    <span class='name'>
      chart
    </span>
    <span class='type'>
      d3 chart instance
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    d3.chart to register as a mix in of this chart. When unspecified, this
method will return the attachment previously registered with the
specified <code>attachmentName</code> (if any).
  </p>
</li>
  </ul>
</div>
</section>
    <section class='api' id='d3layer'>
  <h2>
    d3.layer
  </h2>
  <p>
    Create a layer using the provided `base`. The layer instance is *not*
exposed to d3.chart users. Instead, its instance methods are mixed in to the
<code>base</code> selection it describes; users interact with the instance via
these bound methods.
  </p>
  <div class='entry' id='d3layer_constructor'>
  <div class='bar'>
    <h3>
      selection.layer(options)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3.layer constructor
      </span>
    </span>
  </div>
  <p>
    Defines a new layer on a selection or returns a reference to the selection
corresponding to a layer by a specific name. Most of the time will be called on
a chart, but can be called directly on a layer.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
// define a layer
var layer = d3.select(output)
  .append("svg")
  .attr("width", 100)
  .attr("height", 100)
  .layer({
    dataBind: function(data){
      return this.selectAll("rect")
        .data(data);
    },
    insert: function() {
      return this.append("rect");
    },
    events: {
      enter: function() {
        return this.attr("x", function(d){ return d; })
          .attr("y", 48)
          .attr("width", 4)
          .attr("height",4);
      }
    }
  });

// render the layer  
layer.draw([10,20,50,90]);</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
  <div class='head'>
    <span class='name'>
      options
    </span>
    <span class='type'>
      Object
    </span>
    <span class='optional'>
      optional
    </span>
  </div>
  <p>
    The specific options available during layer creation:
  </p>
  <ul>
    <li>
      <div class='head'>
        <span class='name'>
          events
        </span>
        <span class='type'>
          Object
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        An object specifying
        <a href="https://github.com/misoproject/d3.chart/wiki/lifecycle-events">lifecycle events</a>.
        Keys are the event names and the values are the callbacks.
      </p>
    </li>
    <li>
  <div class='head'>
    <span class='name'>
      dataBind
    </span>
    <span class='type'>
      Function
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The function that sets up the selection and binds the data using the d3 <code>.data()</code>
function. Must return that binding. Takes one argument which is the data that <code>draw</code>
was called with, transformed if the <code>transform</code> method was defined. The context of
the dataBind method is the base selection of the layer.
  </p>
</li>
    <li>
  <div class='head'>
    <span class='name'>
      insert
    </span>
    <span class='type'>
      Function
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The function that gets called once the d3 <code>.enter()</code> method is executed. Note that happens
internally. The context of the insert function is the entered selection.
  </p>
</li>
  </ul>
</li>
  </ul>
</div>
  <h3 class='instance'>
    Instance Methods
  </h3>
  <div class='entry' id='d3layer_i_draw'>
  <div class='bar'>
    <h3>
      layer.draw(data)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3.layer
      </span>
    </span>
  </div>
  <p>
    Allows directly drawing a layer. Note that if your layer is defined as part of a chart,
when you call the chart instance's draw method, it will automatically call the
<code>draw</code> method of all its layers.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
// define a layer
var layer = d3.select(output)
  .append("svg")
  .attr("width", 100)
  .attr("height", 100)
  .layer({
    dataBind: function(data){
      return this.selectAll("rect")
        .data(data);
    },
    insert: function() {
      return this.append("rect");
    },
    events: {
      enter: function() {
        return this.attr("x", function(d){ return d; })
          .attr("y", 48)
          .attr("width", 4)
          .attr("height",4);
      }
    }
  });

// render the layer  
layer.draw([10,20,50,90]);</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          data
        </span>
        <span class='type'>
          Array or Object
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        The data based on which the layer will be drawn.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3layer_i_chart'>
  <div class='bar'>
    <h3>
      selection.chart()
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        chart instance
      </span>
    </span>
  </div>
  <p>
    Returns the chart with which the layer selection is associated. This is most useful
inside of the <code>dataBind</code>, <code>insert</code> and any lifecycle event callback
methods where the default context is set to the layer or lifecycle selection
(on which you can call this chart method.) See example for more details.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
d3.chart("CircleChart", {
  initialize: function() {
    // add a circles layer
    this.layer(
      // layer name:
      "circles",

      // give it a container off of the base
      this.base.append("g"),

      {
        // define the data binding function
        dataBind: function(data) {
          return this.selectAll("circle")
            .data(data);
        },
        // define the element inserting 
        insert: function() {
          return this.append("circle");
        },
        // define the life cycle events
        events: {
          enter : function() {
            return this.attr("cx", function(d) {
              return d;
            })
            .attr("cy", 10)
            .attr("r", this.chart().radius());
          }
        }
      }
    );
  },
  radius: function() {
    return 4;
  }
});

var chart = d3.select(output)
  .append("svg")
  .attr("height", 100)
  .attr("width", 200)
  .chart("CircleChart");

chart.draw([10,15,24,53,90]);</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
</div>
<div class='entry' id='d3layer_i_on'>
  <div class='bar'>
    <h3>
      layer.on(lifecycleEvent, handler, options)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3.layer instance
      </span>
    </span>
  </div>
  <p>
    Allows binding of callbacks to lifecycle events. Note that you can only bind to
the lifecycle events of a layer, NOT any random event. The intent is to use
the high level chart as the event bus, but to allow binding more directly to
lifecycle events on the layers for the purpose of extension.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
// define a new chart type: a circle chart
d3.chart("CircleChart", {

  initialize: function() {
    // create a layer of circles that will go into
    // a new group element on the base of the chart
    var circles = this.layer("circles", this.base.append("g"), {

      // select the elements we wish to bind to and 
      // bind the data to them.
      dataBind: function(data) {
        return this.selectAll("circle")
          .data(data);
      },

      // insert actual circles
      insert: function() {
        return this.append("circle");
      }
    });

    circles.on("enter", function() {
      return this.attr("cx", function(d) {
        return d * 10;
      })
      .attr("cy", 10)
      .attr("r", 0)
      .style("fill", "red");
    });

    circles.on("enter:transition", function() {
      return this.delay(500)
            .attr("r", 5)
            .style("fill", "blue");
    });
  }
});

// create an instance of the chart on a d3 selection
var chart = d3.select(output)
  .append("svg")
  .attr("height", 30)
  .attr("width", 400)
  .chart("CircleChart");

// render it with some data
chart.draw([1,4,6,9,12,13,30]);</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
  <div class='head'>
    <span class='name'>
      lifecycleEvent
    </span>
    <span class='type'>
      String
    </span>
    <span class='required'>
      required
    </span>
  </div>
  <p>
    The name of the lifecycle event to bind to. Allowed events are: <code>update</code>,
<code>enter</code>, <code>merge</code>, <code>exit</code>, <code>update:transition</code>,
<code>enter:transition</code>, <code>merge:transition</code> and <code>exit:transition</code>.
  </p>
</li>
    <li>
      <div class='head'>
        <span class='name'>
          handler
        </span>
        <span class='type'>
          Function
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        The callback to execute when the event type is trigered. Note that you can't directly
        overwrite the context of this handler. It's important that the context be set by the
        binding because it is going to be the selection upon which you would operate.
      </p>
    </li>
    <li>
  <div class='head'>
    <span class='name'>
      options
    </span>
    <span class='type'>
      Object
    </span>
    <span class='optional'>
      optional
    </span>
  </div>
  <p>
    An object containing optional arguments. Optional arguments include:
  </p>
  <ul>
    <li>
  <div class='head'>
    <span class='name'>
      chart
    </span>
    <span class='type'>
      d3.chart instance
    </span>
    <span class='optional'>
      optional
    </span>
  </div>
  <p>
    The chart that should be the returned when a callback references <code>this.chart()</code>.
This is particularly useful when building a single chart that is a combination of several
through mixins.
  </p>
</li>
  </ul>
</li>
  </ul>
</div>
<div class='entry' id='d3layer_i_off'>
  <div class='bar'>
    <h3>
      layer.off(lifecycleEvent, handler)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3.layer instance
      </span>
    </span>
  </div>
  <p>
    Allows for unbinding from a lifecycle event.
<div class="codeblock"><textarea name="codehelper"  class="code" mode=""  runnable="true" showConsole="true" buttons="run,reset,clear" autorun="" callbacks-clear="" callbacks-reset="" callbacks-run="">
// define a new chart type: a circle chart
d3.chart("CircleChart", {

  initialize: function() {
    // create a layer of circles that will go into
    // a new group element on the base of the chart
    var circles = this.layer("circles", this.base.append("g"), {

      // select the elements we wish to bind to and 
      // bind the data to them.
      dataBind: function(data) {
        return this.selectAll("circle")
          .data(data);
      },

      // insert actual circles
      insert: function() {
        return this.append("circle");
      }
    });

    circles.on("enter", function() {
      return this.attr("cx", function(d) {
        return d * 10;
      })
      .attr("cy", 10)
      .attr("r", 0)
      .style("fill", "red");
    });

    circles.on("enter", this.broadcast);

    circles.on("enter:transition", function() {
      return this.delay(500)
            .attr("r", 5)
            .style("fill", "blue");
    });
  },
  broadcast: function() {
    log("broadcast!");
  }
});

// create an instance of the chart on a d3 selection
var chart = d3.select(output)
  .append("svg")
  .attr("height", 30)
  .attr("width", 400)
  .chart("CircleChart");

// removing the broadcast callback will cause it NOT to 
// trigger. Try it out, comment this out.
chart.layer("circles").off("enter", chart.broadcast);

// render it with some data
chart.draw([1,4,6,9,12,13,30]);
</textarea><div class="helptext">You can edit the code in this block and rerun it.</div></div>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          lifecycleEvent
        </span>
        <span class='type'>
          String
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        The event from which to unbind.
      </p>
    </li>
    <li>
      <div class='head'>
        <span class='name'>
          handler
        </span>
        <span class='type'>
          Function
        </span>
        <span class='optional'>
          optional
        </span>
      </div>
      <p>
        The specific handler to unbind. Optional.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3layer_i_databind'>
  <div class='bar'>
    <h3>
      layer.dataBind(data)
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3 selection
      </span>
    </span>
  </div>
  <p>
    Invoked by <code>Layer#draw</code> to join data with this layer's DOM nodes. This
implementation is "virtual"--it *must* be overridden by Layer instances.
<i>Note you will never need to call this method directly.
It is invoked as part of the draw call.</i>
  </p>
  <h3>
    Parameters
  </h3>
  <ul class='parameters'>
    <li>
      <div class='head'>
        <span class='name'>
          data
        </span>
        <span class='type'>
          
        </span>
        <span class='required'>
          required
        </span>
      </div>
      <p>
        The data being bound.
      </p>
    </li>
  </ul>
</div>
<div class='entry' id='d3layer_i_insert'>
  <div class='bar'>
    <h3>
      layer.insert()
    </h3>
    <span class='returns'>
      Returns:
      <span class='object'>
        d3 selection
      </span>
    </span>
  </div>
  <p>
    Invoked by <code>Layer#draw</code> in order to insert new DOM nodes into this
layer's <code>base</code>. This implementation is "virtual" &mdash; it <b>must</b>
be overridden by Layer instances.
<br />
<i>Note you will never need to call this method directly.
It is invoked as part of the draw call.</i>
  </p>
</div>
</section>
  </div>
  <div class='nav_wrapper'>
    <div class='nav'>
      <ul>
        <li>
          <a href='#d3chart'>
            d3.chart
          </a>
          <ul class='object'>
            <li>
              <a href='#d3chart_constructor'>
                constructor
              </a>
            </li>
            <li>
              <a href='#d3chart_extend'>
                extend
              </a>
            </li>
          </ul>
          <span class='instance'>
            Instance Properties
          </span>
          <ul>
            <li>
              <a href='#d3chart_i_base'>
                base
              </a>
            </li>
          </ul>
          <span class='instance'>
            Instance Methods
          </span>
          <ul>
            <li>
              <a href='#d3chart_i_draw'>
                draw
              </a>
            </li>
            <li>
              <a href='#d3chart_i_transform'>
                transform
              </a>
            </li>
            <li>
              <a href='#d3chart_i_trigger'>
                trigger
              </a>
            </li>
            <li>
              <a href='#d3chart_i_on'>
                on
              </a>
            </li>
            <li>
              <a href='#d3chart_i_once'>
                once
              </a>
            </li>
            <li>
              <a href='#d3chart_i_off'>
                off
              </a>
            </li>
            <li>
              <a href='#d3chart_i_layer'>
                layer
              </a>
            </li>
            <li>
              <a href='#d3chart_i_unlayer'>
                unlayer
              </a>
            </li>
            <li>
              <a href='#d3chart_i_attach'>
                attach
              </a>
            </li>
          </ul>
        </li>
        <li>
          <a href='#d3layer'>
            d3.layer
          </a>
          <ul class='object'>
            <li>
              <a href='#d3layer_constructor'>
                constructor
              </a>
            </li>
          </ul>
          <span class='instance'>
            Instance Methods
          </span>
          <ul>
            <li>
              <a href='#d3layer_i_draw'>
                draw
              </a>
            </li>
            <li>
              <a href='#d3layer_i_chart'>
                chart
              </a>
            </li>
            <li>
              <a href='#d3layer_i_on'>
                on
              </a>
            </li>
            <li>
              <a href='#d3layer_i_off'>
                off
              </a>
            </li>
            <li>
              <a href='#d3layer_i_databind'>
                dataBind
              </a>
            </li>
            <li>
              <a href='#d3layer_i_insert'>
                insert
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</article>
    <footer>
      <div class='container'>
        <section>
          <h2>
            A joint project between
          </h2>
          <div class='content'>
            <a href='http://www.guardian.co.uk/profile/guardian-interactive-department'>
              <img alt="Guardian" src="/images/guardian.png"/>
            </a>
            <a href='http://www.bocoup.com'>
              <img alt="Bocoup horizontal 614" src="/images/bocoup-horizontal-614.gif"/>
            </a>
          </div>
        </section>
        <section>
          <h2>
            Formally supported by
          </h2>
          <div class='content'>
            <a href='http://www.guardian.co.uk/development'>
              <img alt="Global dev" src="/images/global-dev.png"/>
            </a>
            <a href='http://www.gatesfoundation.org/'>
              <img alt="Gates" src="/images/gates.png"/>
            </a>
          </div>
        </section>
      </div>
    </footer>
    <script src='/js/jquery.min.js'></script>
    <script src='/js/nav.js'></script>
    <script src='/js/lodash.js'></script>
    <script src='/js/underscore.deferred.js'></script>
    <script charset='utf-8' src='/js/d3/d3.v3.min.js'></script>
    <script src='/js/d3.chart.js'></script>
    <script src='/js/bootstrap/transition.js'></script>
    <script src='/js/bootstrap/collapse.js'></script>
    <script charset='utf-8' src='/js/ace-min/ace.js' type='text/javascript'></script>
    <script src='/js/acify.js'></script>
    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30531498-1']);
      _gaq.push(['_setDomainName', 'misoproject.com']);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
